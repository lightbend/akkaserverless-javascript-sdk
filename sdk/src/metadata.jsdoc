/*
 * Copyright 2021 Lightbend Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * A metadata value. Can either be a string or a buffer.
 *
 * @typedef module:kalix.MetadataValue
 * @type {string|Buffer}
 */

/**
 * @interface module:kalix.MetadataEntry
 * @property {string} key The key for this metadata entry.
 * @property {Buffer|undefined} bytesValue The entry value as bytes.
 * @property {string|undefined} stringValue The entry value as a string.
 */

/**
 * @classdesc Kalix metadata.
 *
 * Metadata is treated as case insensitive on lookup, and case sensitive on set. Multiple values per key are supported,
 * setting a value will add it to the current values for that key. You should delete first if you wish to replace a
 * value.
 *
 * Values can either be strings or byte buffers. If a non string or byte buffer value is set, it will be converted to
 * a string using toString.
 *
 * @class module:kalix.Metadata
 * @param {module:kalix.MetadataEntry[]} entries The list of entries
 */

/**
 * @function module:kalix.Metadata#getSubject
 * @returns {module:kalix.MetadataValue|undefined} CloudEvent subject value.
 */

/**
 * Create a new MetadataEntry.
 *
 * @private
 * @function module:kalix.Metadata#createMetadataEntry
 * @param {string} key The key for the entry.
 * @param {any} value The value for the entry.
 * @returns {module:kalix.MetadataEntry} a new MetadataEntry
 */

/**
 * Get the value from a metadata entry.
 *
 * @private
 * @function module:kalix.Metadata#getValue
 * @param {module:kalix.MetadataEntry} entry The metadata entry.
 * @returns {module:kalix.MetadataValue|undefined} the value for the given entry.
 */

/**
 * Get all the values for the given key.
 *
 * The key is case insensitive.
 *
 * @function module:kalix.Metadata#get
 * @param {string} key The key to get.
 * @returns {module:kalix.MetadataValue[]} All the values, or an empty array if no values exist for the key.
 */

/**
 * Set a given key value.
 *
 * This will append the key value to the metadata, it won't replace any existing values for existing keys.
 *
 * @function module:kalix.Metadata#set
 * @param {string} key The key to set.
 * @param {any} value The value to set.
 * @returns {module:kalix.Metadata} This updated metadata.
 */

/**
 * Delete all values with the given key.
 *
 * The key is case insensitive.
 *
 * @function module:kalix.Metadata#delete
 * @param {string} key The key to delete.
 * @returns {module:kalix.Metadata} This updated metadata.
 */

/**
 * Whether there exists a metadata value for the given key.
 *
 * The key is case insensitive.
 *
 * @function module:kalix.Metadata#has
 * @param {string} key The key to check.
 * @returns {boolean} Whether values exist for the given key.
 */

/**
 * Clear the metadata.
 *
 * @function module:kalix.Metadata#clear
 * @returns {module:kalix.Metadata} This updated metadata.
 */
